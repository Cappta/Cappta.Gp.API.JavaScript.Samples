!function(e){function t(n){if(s[n])return s[n].exports;var a=s[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var s={};t.m=e,t.c=s,t.d=function(e,s,n){t.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="../dist/",t(t.s=2)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={TRANSACTION_APPROVED:1,DENIED:2,SHOW_MESSAGE:3,REQUEST_DATA:4,AUTHENTICATION:5,PINPAD_INPUT:6,SUCCESS:7,GET_CHECKOUTS:10,PLAN_DETAILS:30,PLANS_DETAILS:31,SUBSCRIPTION_DETAILS:32,SUBSCRIPTIONS_DETAILS:33,INVOICE_DETAILS:34,INVOICES_DETAILS:35,AUTORIZE_ONLINE_PAYMENT:60,CREATE_CARD_TOKEN:61,SPLIT_DETAILS:80,SPLITS_DETAILS:81,RECIPIENT_DETAILS:82,RECIPIENTS_DETAILS:83};t.responseType=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestSerializer=void 0;var n=s(6),a={createAuthenticationMessage:function(e,t,s){return{requestType:n.requestType.AUTHENTICATION,details:{apiKey:e,merchantCnpj:t,checkoutNumber:s}}},createDebitPaymentMessage:function(e){return{requestType:n.requestType.PAYMENT,details:{paymentAmount:e,paymentProduct:2}}},createCreditPaymentMessage:function(e,t,s){return{requestType:n.requestType.PAYMENT,details:{paymentAmount:e,installments:t,splittedTransaction:t>1,installmentType:s,paymentProduct:1}}},createRequestParameterMessage:function(e){return{requestType:n.requestType.SEND_PARAMETER,details:e}},createPaymentReversalMessage:function(e,t){return{requestType:n.requestType.ADMINISTRATIVE,details:{administrativePassword:e,administrativeCode:t,administrativeTask:1}}},createSplittedDebitPaymentMessage:function(e,t){return{requestType:n.requestType.PAYMENT,details:{paymentAmount:e,installments:t,paymentProduct:5}}},createPinpadInputMessage:function(e){return{requestType:n.requestType.PINPAD_INPUT,pinpadInputRequest:{inputType:e}}},createFinishPendingPaymentsMessage:function(e){return{requestType:n.requestType.FINISH_PAYMENT_SESSION,finalizationAction:e}},createPlanMessage:function(e){return{requestType:n.requestType.CREATE_PLAN,details:{name:e.name,description:e.description,statement_descriptor:e.statement_descriptor,cycles:e.cycles,interval:e.interval,interval_count:e.interval_count,trial_period_days:e.trial_period_days,items:e.items}}},createUpdatePlanMessage:function(e){return{requestType:n.requestType.UPDATE_PLAN,details:{plan_id:e.plan_id,name:e.name,description:e.description,statement_descriptor:e.statement_descriptor,interval:e.interval,interval_count:e.interval_count,trial_period_days:e.trial_period_days,status:e.status}}},createGetPlansMessage:function(){return{requestType:n.requestType.GET_PLANS}},createGetPlanByIdMessage:function(e){return{requestType:n.requestType.GET_PLAN_BY_ID,details:{plan_id:e}}},createDeletePlanMessage:function(e){return{requestType:n.requestType.DELETE_PLAN,details:{plan_id:e}}},createSubscriptionMessage:function(e){return{requestType:n.requestType.CREATE_SUBSCRIPTION,details:{plan_id:e.plan_id,start_at:e.start_at,customer:e.customer,discounts:e.discounts}}},createGetSubscriptionsMessage:function(){return{requestType:n.requestType.GET_SUBSCRIPTIONS}},createGetSubscriptionByIdMessage:function(e){return{requestType:n.requestType.GET_SUBSCRIPTION_BY_ID,details:{subscription_id:e}}},createCancelSubscriptionMessage:function(e){return{requestType:n.requestType.CANCEL_SUBSCRIPTION,details:{subscription_id:e.subscription_id,cancel_pending_invoices:e.cancel_pending_invoices}}},createUpdateSubscriptionCardMessage:function(e){return{requestType:n.requestType.UPDATE_SUBSCRIPTION_CARD,details:{subscription_id:e.subscription_id,credit_card:{billing_address:e.credit_card.billing_address}}}},createUpdateSubscriptionBillingDateMessage:function(e){return{requestType:n.requestType.UPDATE_SUBSCRIPTION_BILLING_DATE,details:{subscription_id:e.subscription_id,next_billing_date:e.next_billing_date}}},createDiscountMessage:function(e){return{requestType:n.requestType.CREATE_SUBSCRIPTION_DISCOUNT,details:{subscription_id:e.subscription_id,value:e.value,cycles:e.cycles,discount_type:e.discount_type}}},createSubscriptionItemMessage:function(e){return{requestType:n.requestType.CREATE_SUBSCRIPTION_ITEM,details:{subscription_id:e.subscription_id,value:e.value,cycles:e.cycles,description:e.description}}},createRemoveDiscountMessage:function(e){return{requestType:n.requestType.REMOVE_SUBSCRIPTION_DISCOUNT,details:{subscription_id:e.subscription_id,discount_id:e.discount_id}}},createRemoveSubscriptionItemMessage:function(e){return{requestType:n.requestType.REMOVE_SUBSCRIPTION_ITEM,details:{subscription_id:e.subscription_id,item_id:e.item_id}}},createGetInvoicesMessage:function(){return{requestType:n.requestType.GET_INVOICES}},createCancelInvoiceMessage:function(e){return{requestType:n.requestType.CANCEL_INVOICE,details:{invoice_id:e}}},createGetInvoiceByIdMessage:function(e){return{requestType:n.requestType.GET_INVOICE_BY_ID,details:{invoice_id:e}}},createPaymentByTokenMessage:function(e){return{requestType:n.requestType.PAYMENT_BY_TOKEN,details:{cardToken:e.cardToken,paymentAmount:e.amount,installments:e.installments,installmentType:e.installmentType,orderReference:e.orderReference,customer:e.customer,metadata:e.metadata}}},createCreditPaymentAndCreateCardTokenMessage:function(e){return{requestType:n.requestType.CREDIT_PAYMENT_AND_CREATE_CARD_TOKEN,details:{paymentAmount:e.amount,installments:e.installments,splittedTransaction:e.installments>1,installmentType:e.installmentType,customer:e.customer,metadata:e.metadata}}},createCardTokenMessage:function(e){return{requestType:n.requestType.CREATE_CARD_TOKEN,details:{customer:e.customer,metadata:e.metadata}}},createCancelTokenPaymentMessage:function(e){return{requestType:n.requestType.CREATE_CANCEL_TOKEN_PAYMENT,details:{customer:e.customer,paymentKey:e.paymentKey}}},createSplitMessage:function(e){return{requestType:n.requestType.CREATE_SPLIT,details:{administrative_code:e.administrative_code,due_date:e.due_date,amount_split_mode:e.amount_split_mode,fee_liability:e.fee_liability,splits:e.splits}}},createGetSplitsMessage:function(){return{requestType:n.requestType.GET_SPLITS}},createGetSplitByIdMessage:function(e){return{requestType:n.requestType.GET_SPLIT,details:{split_key:e}}},createCancelSplitMessage:function(e){return{requestType:n.requestType.CANCEL_SPLIT,details:{split_key:e}}},createRecipientMessage:function(e){return{requestType:n.requestType.CREATE_RECIPIENT,details:{bank_account:e.bank_account,contact:e.contact,company_name:e.company_name,document_number:e.document_number,document_type:e.document_type}}},createGetRecipientByIdMessage:function(e){return{requestType:n.requestType.GET_RECIPIENT,details:{recipient_key:e}}},createGetRecipientsMessage:function(){return{requestType:n.requestType.GET_RECIPIENTS}},createDisableRecipientMessage:function(e){return{requestType:n.requestType.DISABLE_RECIPIENT,details:{recipient_key:e}}},createGetCheckoutsMessage:function(){return{requestType:n.requestType.GET_CHECKOUTS}},createSetCheckoutMessage:function(e){return{requestType:n.requestType.SET_CHECKOUT,details:{merchantCnpj:e}}},CreateReceiptReprintMessage:function(e,t){return{requestType:n.requestType.RECEIPT_REPRINT,details:{receiptType:e,administrativeCode:t}}},CreateLastReceiptReprintMessage:function(e){return{requestType:n.requestType.RECEIPT_REPRINT,details:{reprintLastReceipt:!0,receiptType:e}}}};t.requestSerializer=a},function(e,t,s){"use strict";var n=s(3),a=s(4),r=s(5),i=s(0),o=s(1),p=s(7);window.CapptaCheckout=function(){function e(e,s){if(u.easyXDMWrapper.close(),e==i.responseType.TRANSACTION_APPROVED){if(I){if(0===--E)return c(s.details),void y();var n=o.requestSerializer.createFinishPendingPaymentsMessage(a.finishSessionAction.WAITING_MORE_MULTIPLE_PAYMENTS);u.pushMessage(n),t(s)}else y();return void c(s.details)}return e==i.responseType.DENIED&&"function"==typeof T?void T(s.details):e==i.responseType.SUBSCRIPTION_DETAILS&&"function"==typeof c?void c(s.details.subscription):e==i.responseType.CREATE_CARD_TOKEN&&"function"==typeof c?void c(s.details):void 0}function t(e){var t=JSON.parse(localStorage.getItem("administrativeCodes"));null===t&&(t=[]),t.push(e.details.AdministrativeCode),localStorage.setItem("administrativeCodes",JSON.stringify(t))}function s(e){var t=JSON.parse(localStorage.getItem("administrativeCodes"));if(null!==t){e({reasonCode:n.deniedReasonCode.PENDING_PAYMENT,details:{administrativeCodes:t}})}}var u=new p.socketWrapper(e,s),c=null,T=null,d=null,l=null,S=!1,E=0,I=!1,_={DEBIT:"Cartão de Débito",CREDIT:"Cartão de Crédito",REVERSAL:"Cancelamento",SUBSCRIPTION:"Assinatura",TOKEN_CREATION:"Criação do token",REPRINT:"Reimpressão"},y=function(){I&&l();var e=o.requestSerializer.createFinishPendingPaymentsMessage(a.finishSessionAction.CONFIRM_PAYMENTS);u.pushMessage(e),E=0,I=!1,localStorage.removeItem("administrativeCodes")},N=function(){I&&l();var e=o.requestSerializer.createFinishPendingPaymentsMessage(a.finishSessionAction.UNDO_PAYMENTS);u.pushMessage(e),E=0,I=!1,localStorage.removeItem("administrativeCodes")},f=function(e,t,a,p){return d=p,u.init("wss://checkout.cappta.com.br:9987/",0,function(){var c=o.requestSerializer.createAuthenticationMessage(e.authenticationKey,e.merchantCnpj,e.checkoutNumber);u.pushMessageAndWaitResponse(c,i.responseType.AUTHENTICATION,function(e){var i=JSON.parse(e);if(S=i.details.authenticated)return void u.loadDependencies(function(){t(i.details),s(p)});a({reasonCode:n.deniedReasonCode.NOT_AUTHENTICATED,reason:r.messages.AUTHENTICATION_ERROR})})},function(){a({reasonCode:8,reason:"Não foi possível estabelecer a comunicação com o Cappta Gp Plus. É possível que já exista uma conexão aberta com ele em outra aba/janela do seu browser ou ele não esteja sendo executado no Windows."})}),this},A=function(e,t,s){c=t,T=s;var n=o.requestSerializer.createDebitPaymentMessage(e.amount);u.pushMessage(n),u.easyXDMWrapper.open(e.amount,_.DEBIT,S)},m=function(e,t,s){c=t,T=s;var n=o.requestSerializer.createCreditPaymentMessage(e.amount,e.installments,e.installmentType);u.pushMessage(n),u.easyXDMWrapper.open(e.amount,_.CREDIT,S)},v=function(e,t,s){c=t,T=s;var n=o.requestSerializer.createSplittedDebitPaymentMessage(e.amount,e.installments);u.pushMessage(n),u.easyXDMWrapper.open(e.amount,_.DEBIT)},C=function(e,t,s){if(E>0)throw"Sessão de multiplos pagamentos em andamento.";c=t,T=s;var n=o.requestSerializer.createPaymentReversalMessage(e.administrativePassword,e.administrativeCode);u.pushMessage(n),u.easyXDMWrapper.open(null,_.REVERSAL,S)},M=function(e,t,s){if(E>0)throw"Sessão de multiplos pagamentos em andamento.";if(!e)throw"Informe uma função administrativa válida";if(!e.administrativeCode)throw"Número de controle inválido";if(!e.receiptType)throw"Informe uma via para ser impressa";c=t,T=s;var n=o.requestSerializer.CreateReceiptReprintMessage(e.receiptType,e.administrativeCode);u.pushMessage(n)},P=function(e,t,s){if(E>0)throw"Sessão de multiplos pagamentos em andamento.";if(!e)throw"Informe uma função administrativa válida";if(!e.receiptType)throw"Informe uma via para ser impressa";c=t,T=s;var n=o.requestSerializer.CreateLastReceiptReprintMessage(e.receiptType);u.pushMessage(n),u.easyXDMWrapper.open(null,_.REPRINT,S)},R=function(e,t,s){T=s;var n=o.requestSerializer.createPinpadInputMessage(e.inputType);u.pushMessageAndWaitResponse(n,i.responseType.PINPAD_INPUT,function(e){var s=JSON.parse(e);6==s.responseType&&t({pinpadValue:s.details.PinpadInputValue})})},g=function(e,t){if("number"!=typeof e)throw"Número inválido de cartões para sessão de multiplos pagamentos";if(e<2)throw"A quantidade de cartões deve ser maior que 1";if(e>9)throw"A quantidade de cartões deve ser menor ou igual a 9";!1!==S&&(l=t,I=!0,E=e)},O=function(e,t,s){var n=o.requestSerializer.createPlanMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.PLAN_DETAILS,function(e){var s=JSON.parse(e);t(s.details.plan)},function(e){var t=JSON.parse(e);s(t.details)})},D=function(e,t,s){var n=o.requestSerializer.createUpdatePlanMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.PLAN_DETAILS,function(e){var s=JSON.parse(e);t(s.details.plan)},function(e){var t=JSON.parse(e);s(t.details)})},q=function(e,t,s){var n=o.requestSerializer.createDeletePlanMessage(e.plan_id);u.pushMessageAndWaitResponse(n,i.responseType.PLAN_DETAILS,function(e){var s=JSON.parse(e);t(s.details.plan)},function(e){var t=JSON.parse(e);s(t.details)})},h=function(e,t,s){var n=o.requestSerializer.createGetPlanByIdMessage(e.plan_id);u.pushMessageAndWaitResponse(n,i.responseType.PLAN_DETAILS,function(e){var s=JSON.parse(e);t(s.details.plan)},function(e){var t=JSON.parse(e);s(t.details)})},b=function(e,t){var s=o.requestSerializer.createGetPlansMessage();u.pushMessageAndWaitResponse(s,i.responseType.PLANS_DETAILS,function(t){var s=JSON.parse(t);e(s.details.plans)},function(e){var s=JSON.parse(e);t(s.details)})},L=function(e,t,s){c=t,T=s;var n=o.requestSerializer.createSubscriptionMessage(e);u.pushMessage(n),u.easyXDMWrapper.open(null,_.SUBSCRIPTION,S)},U=function(e,t,s){c=t,T=s;var n=o.requestSerializer.createUpdateSubscriptionCardMessage(e);u.pushMessage(n),u.easyXDMWrapper.open(null,_.SUBSCRIPTION,S)},B=function(e,t,s){var n=o.requestSerializer.createUpdateSubscriptionBillingDateMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SUBSCRIPTION_DETAILS,function(e){var s=JSON.parse(e);t(s.details.subscription)},function(e){var t=JSON.parse(e);s(t.details)})},J=function(e,t,s){var n=o.requestSerializer.createCancelSubscriptionMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SUBSCRIPTION_DETAILS,function(e){var s=JSON.parse(e);t(s.details.subscription)},function(e){var t=JSON.parse(e);s(t.details)})},W=function(e,t,s){var n=o.requestSerializer.createGetSubscriptionByIdMessage(e.subscription_id);u.pushMessageAndWaitResponse(n,i.responseType.SUBSCRIPTION_DETAILS,function(e){var s=JSON.parse(e);t(s.details.subscription)},function(e){var t=JSON.parse(e);s(t.details)})},G=function(e,t){var s=o.requestSerializer.createGetSubscriptionsMessage();u.pushMessageAndWaitResponse(s,i.responseType.SUBSCRIPTIONS_DETAILS,function(t){var s=JSON.parse(t);e(s.details.subscriptions)},function(e){var s=JSON.parse(e);t(s.details)})},k=function(e,t,s){var n=o.requestSerializer.createDiscountMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SUBSCRIPTION_DETAILS,function(e){var s=JSON.parse(e);t(s.details.subscription)},function(e){var t=JSON.parse(e);s(t.details)})},z=function(e,t,s){var n=o.requestSerializer.createSubscriptionItemMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SUBSCRIPTION_DETAILS,function(e){var s=JSON.parse(e);t(s.details.subscription)},function(e){var t=JSON.parse(e);s(t.details)})},w=function(e,t,s){var n=o.requestSerializer.createRemoveDiscountMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SUBSCRIPTION_DETAILS,function(e){var s=JSON.parse(e);t(s.details.subscription)},function(e){var t=JSON.parse(e);s(t.details)})},Y=function(e,t,s){var n=o.requestSerializer.createRemoveSubscriptionItemMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SUBSCRIPTION_DETAILS,function(e){var s=JSON.parse(e);t(s.details.subscription)},function(e){var t=JSON.parse(e);s(t.details)})},K=function(e,t){var s=o.requestSerializer.createGetInvoicesMessage();u.pushMessageAndWaitResponse(s,i.responseType.INVOICES_DETAILS,function(t){var s=JSON.parse(t);e(s.details.invoices)},function(e){var s=JSON.parse(e);t(s.details)})},V=function(e,t,s){var n=o.requestSerializer.createGetInvoiceByIdMessage(e.invoice_id);u.pushMessageAndWaitResponse(n,i.responseType.INVOICE_DETAILS,function(e){var s=JSON.parse(e);t(s.details.invoice)},function(e){var t=JSON.parse(e);s(t.details)})},x=function(e,t,s){var n=o.requestSerializer.createCancelInvoiceMessage(e.invoice_id);u.pushMessageAndWaitResponse(n,i.responseType.INVOICE_DETAILS,function(e){var s=JSON.parse(e);t(s.details.invoice)},function(e){var t=JSON.parse(e);s(t.details)})},j=function(e,t,s){var n=o.requestSerializer.createPaymentByTokenMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.AUTORIZE_ONLINE_PAYMENT,function(e){var s=JSON.parse(e);t(s.details)},function(e){var t=JSON.parse(e);s(t.details)})},H=function(e,t,s){c=t,T=s;var n=o.requestSerializer.createCreditPaymentAndCreateCardTokenMessage(e);u.pushMessage(n),u.easyXDMWrapper.open(e.amount,_.CREDIT,S)},X=function(e,t,s){c=t,T=s;var n=o.requestSerializer.createCardTokenMessage(e);u.pushMessage(n),u.easyXDMWrapper.open(null,_.TOKEN_CREATION,S)},F=function(e,t,s){var n=o.requestSerializer.createCancelTokenPaymentMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.AUTORIZE_ONLINE_PAYMENT,function(e){var s=JSON.parse(e);t(s.details)},function(e){var t=JSON.parse(e);s(t.details)})},Q=function(e,t){var s=o.requestSerializer.createGetCheckoutsMessage();u.pushMessageAndWaitResponse(s,i.responseType.GET_CHECKOUTS,function(t){var s=JSON.parse(t);e({checkouts:s.details.Checkouts})},t)},Z=function(e,t,s){var n=o.requestSerializer.createSetCheckoutMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SUCCESS,function(s){var n=JSON.parse(s);t(n,e)},s)},$=function(e,t,s){var n=o.requestSerializer.createSplitMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.SPLIT_DETAILS,function(e){var s=JSON.parse(e);t(s.details.split)},function(e){var t=JSON.parse(e);s(t.details)})},ee=function(e,t,s){var n=o.requestSerializer.createGetSplitByIdMessage(e.split_key);u.pushMessageAndWaitResponse(n,i.responseType.SPLIT_DETAILS,function(e){var s=JSON.parse(e);t(s.details.split)},function(e){var t=JSON.parse(e);s(t.details)})},te=function(e,t){var s=o.requestSerializer.createGetSplitsMessage();u.pushMessageAndWaitResponse(s,i.responseType.SPLITS_DETAILS,function(t){var s=JSON.parse(t);e(s.details.splits)},function(e){var s=JSON.parse(e);t(s.details)})},se=function(e,t,s){var n=o.requestSerializer.createCancelSplitMessage(e.split_key);u.pushMessageAndWaitResponse(n,i.responseType.SPLIT_DETAILS,function(e){var s=JSON.parse(e);t(s.details.split)},function(e){var t=JSON.parse(e);s(t.details)})},ne=function(e,t,s){var n=o.requestSerializer.createRecipientMessage(e);u.pushMessageAndWaitResponse(n,i.responseType.RECIPIENT_DETAILS,function(e){var s=JSON.parse(e);t(s.details.recipient)},function(e){var t=JSON.parse(e);s(t.details)})},ae=function(e,t,s){var n=o.requestSerializer.createGetRecipientByIdMessage(e.recipient_key);u.pushMessageAndWaitResponse(n,i.responseType.RECIPIENT_DETAILS,function(e){var s=JSON.parse(e);t(s.details.recipient)},function(e){var t=JSON.parse(e);s(t.details)})},re=function(e,t,s){var n=o.requestSerializer.createDisableRecipientMessage(e.recipient_key);u.pushMessageAndWaitResponse(n,i.responseType.RECIPIENT_DETAILS,function(e){var s=JSON.parse(e);t(s.details.recipient)},function(e){var t=JSON.parse(e);s(t.details)})};return{authenticate:f,confirmPayments:y,undoPayments:N,debitPayment:A,creditPayment:m,splittedDebitPayment:v,creditPaymentAndCreateCardToken:H,reprint:M,reprintLast:P,paymentReversal:C,getPinpadInformation:R,startMultiplePayments:g,createPlan:O,updatePlan:D,deletePlan:q,getPlanById:h,getPlans:b,getCheckouts:Q,setCheckout:Z,createSubscription:L,updateSubscriptionCard:U,updateSubscriptionBillingDate:B,cancelSubscription:J,getSubscriptionById:W,getSubscriptions:G,createSubscriptionDiscount:k,createSubscriptionItem:z,removeSubscriptionDiscount:w,removeSubscriptionItem:Y,getInvoices:K,getInvoiceById:V,cancelInvoice:x,paymentWithToken:j,createCardToken:X,cancelTokenPayment:F,createSplit:$,getSplits:te,getSplitById:ee,cancelSplit:se,createRecipient:ne,getRecipients:function(e,t){var s=o.requestSerializer.createGetRecipientsMessage();u.pushMessageAndWaitResponse(s,i.responseType.RECIPIENTS_DETAILS,function(t){var s=JSON.parse(t);e(s.details.recipients)},function(e){var s=JSON.parse(e);t(s.details)})},getRecipientById:ae,disableRecipient:re}}()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NOT_AUTHENTICATED:1,WEBSOCKET_ERROR:8,PENDING_PAYMENT:15};t.deniedReasonCode=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={UNDO_PAYMENTS:1,CONFIRM_PAYMENTS:2,WAITING_MORE_MULTIPLE_PAYMENTS:4};t.finishSessionAction=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={AUTHENTICATION_ERROR:"Autenticação inválida",WEBSOCKET_ERROR:"Não foi possível estabelecer a comunicação com o Cappta Gp Plus. É possível que já exista uma conexão aberta com ele em outra aba/janela do seu browser ou ele não esteja sendo executado no Windows."};t.messages=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={PAYMENT:1,ADMINISTRATIVE:2,FINISH_PAYMENT_SESSION:3,AUTHENTICATION:4,SEND_PARAMETER:5,PINPAD_INPUT:6,GET_CHECKOUTS:8,SET_CHECKOUT:9,CREATE_PLAN:30,UPDATE_PLAN:31,DELETE_PLAN:32,GET_PLAN_BY_ID:33,GET_PLANS:34,CREATE_SUBSCRIPTION:35,UPDATE_SUBSCRIPTION_CARD:36,UPDATE_SUBSCRIPTION_BILLING_DATE:37,CANCEL_SUBSCRIPTION:38,GET_SUBSCRIPTION_BY_ID:39,GET_SUBSCRIPTIONS:40,CREATE_SUBSCRIPTION_DISCOUNT:41,CREATE_SUBSCRIPTION_ITEM:42,REMOVE_SUBSCRIPTION_DISCOUNT:43,REMOVE_SUBSCRIPTION_ITEM:44,GET_INVOICES:45,GET_INVOICE_BY_ID:46,CANCEL_INVOICE:47,CREDIT_PAYMENT_AND_CREATE_CARD_TOKEN:60,PAYMENT_BY_TOKEN:61,CREATE_CANCEL_TOKEN_PAYMENT:62,CREATE_CARD_TOKEN:63,RECEIPT_REPRINT:64,CREATE_SPLIT:80,GET_SPLIT:81,GET_SPLITS:82,CANCEL_SPLIT:83,CREATE_RECIPIENT:84,GET_RECIPIENT:85,GET_RECIPIENTS:86,DISABLE_RECIPIENT:87};t.requestType=n},function(e,t,s){"use strict";function n(e,t){var s=this;this.init=function(n,a,i,u){var c=window.WebSocket||window.MozWebSocket;window.ws=new c(n),ws.onopen=function(){console.log("connection open :)"),i()},ws.onclose=function(){t(),console.log("connection closed :("),0===a&&s.init(o,++a,i,u)},ws.onerror=function(e){console.log(e),ws.close(),n==o&&u()},ws.onmessage=function(t){p=t.data;var n=JSON.parse(t.data);return n.responseType==r.responseType.TRANSACTION_APPROVED||n.responseType==r.responseType.DENIED||n.responseType==r.responseType.SUBSCRIPTION_DETAILS||n.responseType==r.responseType.CREATE_CARD_TOKEN?void e(n.responseType,n):n.responseType==r.responseType.SHOW_MESSAGE?void s.easyXDMWrapper.showMessage(n):n.responseType==r.responseType.REQUEST_DATA?void s.easyXDMWrapper.requestInfo(n):void 0}},this.loadDependencies=function(e){!function(e,t,s){if(void 0===window[e]){var n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(n),void(n.readyState?n.onreadystatechange=function(){if("loaded"==n.readyState||"complete"==n.readyState)return n.onreadystatechange=null,void s()}:n.onload=function(){s()})}s()}("easyXDM","https://s3.amazonaws.com/cappta.api/v3/lib/easyXDM/easyXDM.min.js",function(){s.easyXDMWrapper.init(),e()})},this.pushMessage=function(e){function t(e,s){setTimeout(function(){if(1===e.readyState)return void(null!==s&&s());t(e,s)},5)}t(ws,function(){ws.send(JSON.stringify(e))})},this.pushMessageAndWaitResponse=function(e,t,s,n){this.pushMessage(e),a(t,s,n)};var n={OPEN:1,SHOW_MESSAGE:2,REQUEST_DATA:3,CLOSE:4};this.easyXDMWrapper={init:function(){u=new easyXDM.Socket({remote:"https://s3.amazonaws.com/cappta.api/v3/src/checkout/modal.html",props:{id:"cappta-checkout-iframe",style:{background:"transparent none repeat scroll 0% 0%",border:"0px none transparent","overflow-x":"hidden","overflow-y":"auto",margin:"0px",padding:"0px",position:"relative",left:"0px",top:"0px",width:"100%",height:"100%",allowtransparency:!0,display:"none"}},onMessage:function(e,t){var n=JSON.parse(e);if(n.responseType==r.responseType.DENIED)return void errorPaymentFunction(n.details);if(n.responseType==r.responseType.REQUEST_DATA){var a=i.requestSerializer.createRequestParameterMessage(n.details);s.pushMessage(a)}}})},open:function(e,t,s){if(!1!==s){var a={requestType:n.OPEN,details:{amount:e,productName:t}};document.getElementById("cappta-checkout-iframe").style.position="fixed",document.getElementById("cappta-checkout-iframe").style.display="block",this.pushMessage(a)}},showMessage:function(e){var t={requestType:n.SHOW_MESSAGE,details:e.details};this.pushMessage(t)},requestInfo:function(e){var t={requestType:n.REQUEST_DATA,details:e.details};this.pushMessage(t)},close:function(){this.pushMessage({requestType:n.CLOSE}),document.getElementById("cappta-checkout-iframe").style.position="",document.getElementById("cappta-checkout-iframe").style.display="none"},pushMessage:function(e){u.postMessage(JSON.stringify(e))}}}function a(e,t,s){setTimeout(function(){var n=JSON.parse(p);return null!==p&&n.responseType==r.responseType.DENIED?void(s&&(s(p),p=null)):null!==p&&n.responseType==e?void(t&&(t(p),p=null)):void a(e,t,s)},5)}Object.defineProperty(t,"__esModule",{value:!0}),t.socketWrapper=void 0;var r=s(0),i=s(1),o="ws://localhost:8181/",p=null,u=null;t.socketWrapper=n}]);